diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/createlinks mezzanine_patched_e-smith-base-4.15.4/createlinks
--- e-smith-base-4.15.4/createlinks	2005-07-15 19:22:40.581823032 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/createlinks	2005-07-15 19:22:12.256129192 -0600
@@ -117,7 +117,7 @@
 
 # conf-modules
 
-templates2events("/etc/modules.conf", qw(
+templates2events("/etc/modprobe.conf", qw(
 	console-save
 	bootstrap-console-save
 	post-install
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/events/actions/conf-modules mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/events/actions/conf-modules
--- e-smith-base-4.15.4/root/etc/e-smith/events/actions/conf-modules	2005-04-01 12:27:48.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/events/actions/conf-modules	2005-07-15 19:22:26.253001344 -0600
@@ -33,8 +33,8 @@
 {
     next unless $file =~ /System.map-(.*)/;
     my $version = $1;
-    open(MODULES, "</etc/modules.conf") or
-	die "Could not read /etc/modules.conf: $!";
+    open(MODULES, "</etc/modprobe.conf") or
+	die "Could not read /etc/modprobe.conf: $!";
 
     my $pid = open(DEPMOD, "|-");
     $SIG{ALRM} = sub { die "whoops, depmod pipe broke" };
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10blockdev-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10blockdev-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10blockdev-aliases	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10blockdev-aliases	2003-06-09 13:25:36.000000000 -0600
@@ -0,0 +1,13 @@
+{
+    foreach my $line
+	(
+	    "alias block-major-3 off",
+	)
+    {
+	unless (exists $lines{$line})
+	{
+	    push @lines, $line;
+	}
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10EthernetDrivers mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10EthernetDrivers
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10EthernetDrivers	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10EthernetDrivers	2002-02-15 12:31:21.000000000 -0700
@@ -0,0 +1,12 @@
+{
+    @lines = grep { !/^\s*alias\s*eth[01]/ } @lines;
+    if (defined $EthernetDriver1 && $EthernetDriver1 ne "unknown")
+    {
+	push @lines, "alias eth0 ${EthernetDriver1}";
+    }
+    if (defined $EthernetDriver2 && $EthernetDriver2 ne "unknown")
+    {
+	push @lines, "alias eth1 ${EthernetDriver2}";
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10hisax mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10hisax
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10hisax	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10hisax	2002-02-15 12:31:21.000000000 -0700
@@ -0,0 +1,25 @@
+{
+    @lines = grep { !/^\s*options\s*hisax/ } @lines;
+    my $hisax_alias = "alias char-major-43 hisax";
+    unless (exists $lines{$hisax_alias})
+    {
+	push @lines, $hisax_alias;
+    }
+    my $hisax = db_get_prop($confref, 'isdn', 'HisaxOptions') || "";
+    my $type = db_get_prop($confref, 'isdn', 'Type') || "";
+    my $protocol = db_get_prop($confref, 'isdn', 'Protocol') || "";
+    if ($type)
+    {
+	$hisax .= " type=$type";
+    }
+    if ($protocol)
+    {
+	$hisax .= " protocol=$protocol";
+    }
+    if ($hisax)
+    {
+	push @lines, "options hisax $hisax";
+    }
+    "";
+}
+
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-aliases	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-aliases	2002-07-25 17:54:47.000000000 -0600
@@ -0,0 +1,19 @@
+{
+    foreach my $line
+	(
+	    # alias IPX off
+	    "alias net-pf-4 off",
+	    # alias IPV6 off
+	    "alias net-pf-10 off",
+	    "alias net-pf-15 ipsec",
+	    "alias net-pf-47 ip_gre",
+	    "alias net-pf-50 ipsec",
+	)
+    {
+	unless (exists $lines{$line})
+	{
+	    push @lines, $line;
+	}
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-pppoe mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-pppoe
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-pppoe	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10net-fp-pppoe	2005-05-13 15:36:25.000000000 -0600
@@ -0,0 +1,9 @@
+{
+    # Ensure that pppoe module can be autoloaded
+    my $line = "alias net-pf-24 pppoe";
+    unless (exists $lines{$line})
+    {
+	push @lines, $line;
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10parport-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10parport-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10parport-aliases	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10parport-aliases	2002-02-15 12:31:21.000000000 -0700
@@ -0,0 +1,13 @@
+{
+    foreach my $line
+	(
+	    "alias parport_lowlevel parport_pc"
+	)
+    {
+	unless (exists $lines{$line})
+	{
+	    push @lines, $line;
+	}
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp	2002-07-31 12:04:07.000000000 -0600
@@ -0,0 +1,21 @@
+{
+    # Obsolete the aliasing of ppp module name if we find it
+    # We no longer need to use the alias, we use a module
+    # search path instead
+    @lines = grep { !/^alias ppp ppp-4mppe$/ } @lines;
+    foreach my $line
+	(
+	    "alias ppp ppp_generic",
+	    "alias char-major-108 ppp",
+	    "alias /dev/ppp ppp",
+	    "alias tty-ldisc-3 ppp_async",
+	    "alias tty-ldisc-14 ppp_synctty",
+	)
+    {
+	unless (exists $lines{$line})
+	{
+	    push @lines, $line;
+	}
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp-compress-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp-compress-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp-compress-aliases	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10ppp-compress-aliases	2002-02-15 12:31:21.000000000 -0700
@@ -0,0 +1,16 @@
+{
+    foreach my $line
+	(
+	    "alias ppp-compress-18 ppp_mppe",
+	    "alias ppp-compress-21 bsd_comp",
+	    "alias ppp-compress-24 ppp_deflate",
+	    "alias ppp-compress-26 ppp_deflate"
+	)
+    {
+	unless (exists $lines{$line})
+	{
+	    push @lines, $line;
+	}
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10tap-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10tap-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10tap-aliases	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10tap-aliases	2002-02-15 12:31:21.000000000 -0700
@@ -0,0 +1,11 @@
+{
+    foreach my $i (0..15)
+    {
+	my $line = "alias tap${i} off";
+	unless (exists $lines{$line})
+	{
+	    push @lines, $line;
+	}
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10usb mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10usb
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10usb	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/10usb	2003-04-28 12:44:05.000000000 -0600
@@ -0,0 +1,8 @@
+{
+    my $usb_alias = "alias char-major-180 usbcore";
+    unless (exists $lines{$usb_alias})
+    {
+	push @lines, $usb_alias;
+    }
+    "";
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/99writefile mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/99writefile
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/99writefile	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/99writefile	2002-02-15 12:31:21.000000000 -0700
@@ -0,0 +1,7 @@
+{
+    $OUT .= "";
+    foreach my $line (@lines)
+    {
+	$OUT .= "$line\n";
+    }
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/template-begin mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/template-begin
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/template-begin	1969-12-31 17:00:00.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modprobe.conf/template-begin	2005-07-15 19:18:55.928252360 -0600
@@ -0,0 +1,34 @@
+{
+    %lines = ();
+    @lines = ();
+    open (RD, "</etc/modprobe.conf")
+    || warn "Cannot open input file /etc/modprobe.conf: $!\n";
+    while (<RD>)
+    {
+	chop;
+	push @lines, $_;
+	$lines{$_} = 1;
+    }
+    close(RD);
+    my @header = (
+	"#------------------------------------------------------------",
+	"# BE CAREFUL WHEN MODIFYING THIS FILE! It is updated automatically",
+	"# by the SME server software. Various aliases are added and/or",
+	"# deleted by the template processing of the file and white space",
+	"# is removed, but otherwise changes to the file are preserved.",
+	"# For more information, see http://www.e-smith.org/custom/ and",
+	"# the template fragments in /etc/e-smith/templates/etc/modprobe.conf/.",
+	"# ",
+	"# copyright (C) 2002-2005 Mitel Networks Corporation",
+	"#------------------------------------------------------------",
+    );
+    foreach my $line (@header)
+    {
+	# Print the header banner, and delete any of its lines from the
+	# buffer, so that it isn't repeated.
+	my $test = $line;
+	$test =~ tr/()/../; # Avoid special interpretation of () in pattern
+	@lines = grep { !/^$test$/ } @lines;
+	$OUT .= "$line\n";
+    }
+}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10appletalk mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10appletalk
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10appletalk	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10appletalk	1969-12-31 17:00:00.000000000 -0700
@@ -1,6 +0,0 @@
-{
-    # Obsolete the aliasing of the appletalk module
-    # We use a different path now, or don't need to fix it at all
-    @lines = grep { !/^alias appletalk appletalk-fixed$/ } @lines;
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10blockdev-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10blockdev-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10blockdev-aliases	2003-06-09 13:25:36.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10blockdev-aliases	1969-12-31 17:00:00.000000000 -0700
@@ -1,13 +0,0 @@
-{
-    foreach my $line
-	(
-	    "alias block-major-3 off",
-	)
-    {
-	unless (exists $lines{$line})
-	{
-	    push @lines, $line;
-	}
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10EthernetDrivers mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10EthernetDrivers
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10EthernetDrivers	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10EthernetDrivers	1969-12-31 17:00:00.000000000 -0700
@@ -1,12 +0,0 @@
-{
-    @lines = grep { !/^\s*alias\s*eth[01]/ } @lines;
-    if (defined $EthernetDriver1 && $EthernetDriver1 ne "unknown")
-    {
-	push @lines, "alias eth0 ${EthernetDriver1}";
-    }
-    if (defined $EthernetDriver2 && $EthernetDriver2 ne "unknown")
-    {
-	push @lines, "alias eth1 ${EthernetDriver2}";
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10hisax mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10hisax
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10hisax	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10hisax	1969-12-31 17:00:00.000000000 -0700
@@ -1,25 +0,0 @@
-{
-    @lines = grep { !/^\s*options\s*hisax/ } @lines;
-    my $hisax_alias = "alias char-major-43 hisax";
-    unless (exists $lines{$hisax_alias})
-    {
-	push @lines, $hisax_alias;
-    }
-    my $hisax = db_get_prop($confref, 'isdn', 'HisaxOptions') || "";
-    my $type = db_get_prop($confref, 'isdn', 'Type') || "";
-    my $protocol = db_get_prop($confref, 'isdn', 'Protocol') || "";
-    if ($type)
-    {
-	$hisax .= " type=$type";
-    }
-    if ($protocol)
-    {
-	$hisax .= " protocol=$protocol";
-    }
-    if ($hisax)
-    {
-	push @lines, "options hisax $hisax";
-    }
-    "";
-}
-
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-aliases	2002-07-25 17:54:47.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-aliases	1969-12-31 17:00:00.000000000 -0700
@@ -1,19 +0,0 @@
-{
-    foreach my $line
-	(
-	    # alias IPX off
-	    "alias net-pf-4 off",
-	    # alias IPV6 off
-	    "alias net-pf-10 off",
-	    "alias net-pf-15 ipsec",
-	    "alias net-pf-47 ip_gre",
-	    "alias net-pf-50 ipsec",
-	)
-    {
-	unless (exists $lines{$line})
-	{
-	    push @lines, $line;
-	}
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-pppoe mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-pppoe
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-pppoe	2005-05-13 15:36:25.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10net-fp-pppoe	1969-12-31 17:00:00.000000000 -0700
@@ -1,9 +0,0 @@
-{
-    # Ensure that pppoe module can be autoloaded
-    my $line = "alias net-pf-24 pppoe";
-    unless (exists $lines{$line})
-    {
-	push @lines, $line;
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10parport-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10parport-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10parport-aliases	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10parport-aliases	1969-12-31 17:00:00.000000000 -0700
@@ -1,13 +0,0 @@
-{
-    foreach my $line
-	(
-	    "alias parport_lowlevel parport_pc"
-	)
-    {
-	unless (exists $lines{$line})
-	{
-	    push @lines, $line;
-	}
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp	2002-07-31 12:04:07.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp	1969-12-31 17:00:00.000000000 -0700
@@ -1,21 +0,0 @@
-{
-    # Obsolete the aliasing of ppp module name if we find it
-    # We no longer need to use the alias, we use a module
-    # search path instead
-    @lines = grep { !/^alias ppp ppp-4mppe$/ } @lines;
-    foreach my $line
-	(
-	    "alias ppp ppp_generic",
-	    "alias char-major-108 ppp",
-	    "alias /dev/ppp ppp",
-	    "alias tty-ldisc-3 ppp_async",
-	    "alias tty-ldisc-14 ppp_synctty",
-	)
-    {
-	unless (exists $lines{$line})
-	{
-	    push @lines, $line;
-	}
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp-compress-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp-compress-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp-compress-aliases	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10ppp-compress-aliases	1969-12-31 17:00:00.000000000 -0700
@@ -1,16 +0,0 @@
-{
-    foreach my $line
-	(
-	    "alias ppp-compress-18 ppp_mppe",
-	    "alias ppp-compress-21 bsd_comp",
-	    "alias ppp-compress-24 ppp_deflate",
-	    "alias ppp-compress-26 ppp_deflate"
-	)
-    {
-	unless (exists $lines{$line})
-	{
-	    push @lines, $line;
-	}
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10tap-aliases mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10tap-aliases
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10tap-aliases	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10tap-aliases	1969-12-31 17:00:00.000000000 -0700
@@ -1,11 +0,0 @@
-{
-    foreach my $i (0..15)
-    {
-	my $line = "alias tap${i} off";
-	unless (exists $lines{$line})
-	{
-	    push @lines, $line;
-	}
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10usb mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10usb
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10usb	2003-04-28 12:44:05.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/10usb	1969-12-31 17:00:00.000000000 -0700
@@ -1,8 +0,0 @@
-{
-    my $usb_alias = "alias char-major-180 usbcore";
-    unless (exists $lines{$usb_alias})
-    {
-	push @lines, $usb_alias;
-    }
-    "";
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/95ModulePaths mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/95ModulePaths
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/95ModulePaths	2005-06-09 07:41:22.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/95ModulePaths	1969-12-31 17:00:00.000000000 -0700
@@ -1,12 +0,0 @@
-{
-    # Remove obsolete settings of module search path (which
-    # breaks kernel upgrade depmods).
-    @lines = grep {
-	$_ ne 'path=/lib/modules/$(/bin/uname -r)-e-smith'
-	&&
-	$_ ne 'path=/lib/modules/$(/bin/uname -r)/updates'
-	&&
-	$_ ne 'path=/lib/modules/$(/bin/uname -r)'
-    } @lines;
-    $OUT = '';
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/99writefile mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/99writefile
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/99writefile	2002-02-15 12:31:21.000000000 -0700
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/99writefile	1969-12-31 17:00:00.000000000 -0700
@@ -1,7 +0,0 @@
-{
-    $OUT .= "";
-    foreach my $line (@lines)
-    {
-	$OUT .= "$line\n";
-    }
-}
diff -Nur -x '*.orig' -x '*.rej' e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/template-begin mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/template-begin
--- e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/template-begin	2002-07-25 17:54:47.000000000 -0600
+++ mezzanine_patched_e-smith-base-4.15.4/root/etc/e-smith/templates/etc/modules.conf/template-begin	1969-12-31 17:00:00.000000000 -0700
@@ -1,34 +0,0 @@
-{
-    %lines = ();
-    @lines = ();
-    open (RD, "</etc/modules.conf")
-    || warn "Cannot open input file /etc/modules.conf: $!\n";
-    while (<RD>)
-    {
-	chop;
-	push @lines, $_;
-	$lines{$_} = 1;
-    }
-    close(RD);
-    my @header = (
-	"#------------------------------------------------------------",
-	"# BE CAREFUL WHEN MODIFYING THIS FILE! It is updated automatically",
-	"# by the SME server software. Various aliases are added and/or",
-	"# deleted by the template processing of the file and white space",
-	"# is removed, but otherwise changes to the file are preserved.",
-	"# For more information, see http://www.e-smith.org/custom/ and",
-	"# the template fragments in /etc/e-smith/templates/etc/modules.conf/.",
-	"# ",
-	"# copyright (C) 2002 Mitel Networks Corporation",
-	"#------------------------------------------------------------",
-    );
-    foreach my $line (@header)
-    {
-	# Print the header banner, and delete any of its lines from the
-	# buffer, so that it isn't repeated.
-	my $test = $line;
-	$test =~ tr/()/../; # Avoid special interpretation of () in pattern
-	@lines = grep { !/^$test$/ } @lines;
-	$OUT .= "$line\n";
-    }
-}
